<script>
  //Adjusted from Assignment 2
  window.onload = function () {
    var urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has("username")) { //Gets username data and displays in URL
      f.fullname.value = urlParams.get("fullname"); //full name from form is equal to the full name that is displayed in URL
      f.username.value = urlParams.get("username"); // username from form is equal to the username that is displayed in URL
      f.email.value = urlParams.get("email"); //email from form is equal to the email that is displayed in URL
      f.password.value = urlParams.get("password"); //password from form is equal to the password that is in URL
      f.repeat_password.value = urlParams.get("repeat_password"); //repeat password from form is equal to the repeat password that is in URL
      f.points.value = urlParams.get("starting_points")//beginning password from form is equal to the starting points displayed in URL

      if (urlParams.has("username_error")) { //if there are username errors, get username errors and display in URL
        username_label.innerHTML = urlParams.get("username_error");
      }
      if (urlParams.has("fullname_error")) { //if there are fullname errors, get fullname errors and display in URL
        fullname_label.innerHTML = urlParams.get("fullname_error");
      }
      if (urlParams.has("email_error")) { //if there are fullname errors, get fullname errors and display in URL
        fullname_label.innerHTML = urlParams.get("email_error");
      }
      if (urlParams.has("points_error")) { //if there are points errors, get fullname errors and display in URL
        fullname_label.innerHTML = urlParams.get("points_error");
      }
      checkpassword();
    }
  }
</script>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link href="eb_mpg.css" rel="stylesheet">
</head>

<ul class="topnav">
  <li><a href="./eb_mainpg.html">Home</a></li>
  <li><a href="./eb_gklist.html">List of GK Members</a></li>
  <li><a class="active" href="./eb_regpg.html">Register New Member</a></li>
  <li><a href="./eb_ptlog.html">Add Points to a Member</a></li>
</ul>

<h1> Club Member Registration</h1>

<body>
  <script>
    //checks if password is equal to repeat password on html form, if not, then show error message that says passwords don't match, please retype
    function checkpassword() {
      var p = f.password.value;
      var cp = f.repeat_password.value;
      if (p == cp) { }
      else
        alert("Passwords Don't Match. Please retype")
      response.redirect("registration.html?"); //If passwords don't match, redirect back to registration html page
    }
  </script>

  <script>
    //Below contains guards that prevent error data from being inputted and meet the assignment's requirments
    //Makes the data sticky when incorrectly inputted
    //Email: x@y.z format and address contains only numbers, letters and _. in the beginning. The host machine can only contain numbers and letters and the domain name is 2 or 3 letters and case insensitive
    //Password: Is a minimum of 6 characters, any characters are valid (Same requirements is applied to repeat password) 
  </script>

  <body>
    <div>
      <form name="f" method="POST" action="">
        <input type="text" name="fullname" size="40" maxlength="30" placeholder="Enter First & Last Name" required
          title="Only Letters and add a space"><label for="fullname" id="fullname_label"></label><br />
        <input type="text" name="username" size="40" required title="Either 4-10 Characters & only numbers/letters"
          placeholder="Enter Username"><label for="username" id="username_label"></label><br />
        <input type="email" name="email" size="40" placeholder="Enter Email"><label for="email"
          id="email_label"></label><br />
        <input type="password" id="password" name="password" size="40" pattern=".{6,}" required
          title="6 characters minimum" placeholder="Enter Password"><br />
        <input type="password" id="repeat_password" name="repeat_password" size="40" pattern=".{6,}" required
          title="6 characters minimum" placeholder="Enter Password Again"><br />
        <input type="points" name="starting_points" size="40" required title="Start with 0"
          placeholder="Enter points for a new member"><label for="points" id="points_label"></label><br />

        <input type="submit" value="Submit" id="submit" value="checkpassword" onclick="checkpassword()">
      </form>
    </div>
    
  </body>

</body>

</html>